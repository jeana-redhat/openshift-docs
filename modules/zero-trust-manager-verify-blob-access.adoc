// Module included in the following assemblies:
//
// * security/zero_trust_workload_identity_manageer/zero-trust-manager-oidc-federation.adoc


:_mod-docs-content-type: PROCEDURE
[id="zero-trust-manager-verify-blob-access_{context}"]
= Verifying that the application workload can access the content in the Azure Blob Storage

You can check if the application workload can access the Azure Blob Storage.

.Prerequisites

* An Azure Blob Storage has been created.

.Procedure

. Retrieve a JWT token from the SPIFFE Workload API and login to the Azure CLI included within the pod.
+
[source,terminal]
----
$ oc rsh -n $APP_NAMESPACE deployment/$APP_NAME

$ export TOKEN=$(/opt/app-root/src/get-spiffe-token.py --audience=$AZURE_AUDIENCE)
$ az login --service-principal \
  -t ${AZURE_TENANT_ID} \
  -u ${AZURE_CLIENT_ID} \
  --federated-token ${TOKEN}
----

. Create a new file with the application workload pod and upload the file to the Blob Storage.
+
[source,terminal]
----
$ echo “Hello from OpenShift” > openshift-spire-federated-identities.txt
$ az storage blob upload \
  --account-name ${BLOB_STORE_ACCOUNT} \
  --container-name ${BLOB_STORE_CONTAINER} \
  --name openshift-spire-federated-identities.txt \
  --file openshift-spire-federated-identities.txt \
  --auth-mode login
----

.Verification
* Confirm the file uploaded successfully by listing the files contained.
+
[source,terminal]
----
$ az storage blob list \
  --account-name ${BLOB_STORE_ACCOUNT} \
  --container-name ${BLOB_STORE_CONTAINER} \
  --auth-mode login \
  -o table
----
